---
layout: default
---
<article class="gallery">
  <header class="gallery-header">
    <h1 class="gallery-title">{{ page.title | escape }}</h1>
    {% if page.description %}
      <p class="gallery-description">{{ page.description }}</p>
    {% endif %}
  </header>

  <div class="gallery-content">
    {{ content }}
    
    {% if page.gallery_path %}
      <div class="photo-grid">
        {% assign image_files = site.static_files | where_exp: "file", "file.path contains page.gallery_path" %}
        {% for image in image_files %}
          <div class="photo-item">
            <img src="{{ image.path | relative_url }}" alt="{{ image.name }}" loading="lazy">
          </div>
        {% else %}
          <p>No images found in the specified gallery path.</p>
        {% endfor %}
      </div>
    {% else %}
      <p>No gallery path specified.</p>
    {% endif %}
  </div>
</article>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const grid = document.querySelector('.photo-grid');
  const items = grid.querySelectorAll('.photo-item');

  function handleImage(item) {
    const img = item.querySelector('img');
    
    if (img.complete) {
      setImageSize(item, img);
    } else {
      img.addEventListener('load', () => setImageSize(item, img));
    }
  }

  function setImageSize(item, img) {
    const ratio = img.naturalWidth / img.naturalHeight;
    
    if (ratio > 1.3) {  // Landscape images
      item.classList.add('wide');
    } else if (ratio < 0.7) {  // Portrait images
      item.classList.add('tall');
    }
    
    // For very wide panoramas
    if (ratio > 2) {
      item.classList.add('panorama');
    }
  }

  items.forEach(handleImage);
});
</script>

<style>
.photo-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  grid-auto-rows: 200px;
  grid-gap: 10px;
}

.photo-item {
  overflow: hidden;
}

.photo-item img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.photo-item.wide {
  grid-column: span 2;
}

.photo-item.tall {
  grid-row: span 2;
}

.photo-item.panorama {
  grid-column: 1 / -1;  /* Span all columns */
}

@media (max-width: 768px) {
  .photo-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 480px) {
  .photo-grid {
    grid-template-columns: 1fr;
  }
  
  .photo-item.wide,
  .photo-item.tall,
  .photo-item.panorama {
    grid-column: auto;
    grid-row: auto;
  }
}
</style>